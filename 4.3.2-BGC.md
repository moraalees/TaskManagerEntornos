# 1.-Ejecutar el analizador de código del IDE (linter) y/o revisión manual para localizar code smells y patrones. Localización del al menos 5 code smell y patrones de refactorización

[Captura de los 5 errores identificados](https://github.com/moraalees/TaskManagerEntornos/blob/Bruno/images/debug1/Captura%20de%20pantalla%202025-05-20%20205537.png)

# 2.-Aplicación de refactorizaciones:

## Seleccionar y aplicar al menos tres patrones de refactorización distintos (p.ej. Extracción de Método, Introducir Parámetro Objeto, Simplificar Condicional).

1.-Primera refactorización [C:\Users\gomez\OneDrive\Escritorio\fullset\Alberti\Entornos de desarrollo\taskmanager_kotest\TaskManagerEntornos\src\main\kotlin\ui\ConsolaUI.kt:162:17: Function cambiarEstadoTarea has 3 return statements which exceeds the limit of 2. [ReturnCount]
](https://github.com/moraalees/TaskManagerEntornos/blob/Bruno/images/debug1/Captura%20de%20pantalla%202025-05-20%20210612.png)

Para seguir buenas prácticas, añadí una línea en blanco al final de los archivos .kt que no la tenían. Esto evita problemas con herramientas como Git y mejora la legibilidad y el mantenimiento del código, ya que muchos entornos esperan que los archivos terminen con un salto de línea.

2.-Segunda refactorización [C:\Users\gomez\OneDrive\Escritorio\fullset\Alberti\Entornos de desarrollo\taskmanager_kotest\TaskManagerEntornos\src\main\kotlin\ui\ConsolaUI.kt:290:2: The file C:\Users\gomez\OneDrive\Escritorio\fullset\Alberti\Entornos de desarrollo\taskmanager_kotest\TaskManagerEntornos\src\main\kotlin\ui\ConsolaUI.kt is not ending with a new line. [NewLineAtEndOfFile] ](https://github.com/moraalees/TaskManagerEntornos/blob/Bruno/images/debug1/Captura%20de%20pantalla%202025-05-20%20211814.png)

Aquí he puesto un espacio en el final de la función.

3.-Tercera refactorización [C:\Users\gomez\OneDrive\Escritorio\fullset\Alberti\Entornos de desarrollo\taskmanager_kotest\TaskManagerEntornos\src\main\kotlin\ui\ConsolaUI.kt:3:1: es.prog2425.taskmanager.model.* is a wildcard import. Replace it wi](https://github.com/moraalees/TaskManagerEntornos/blob/Bruno/images/debug1/Captura%20de%20pantalla%202025-05-21%20153923.png)

Me salía un aviso porque usé import ...model.*, que es como decir "importa todo" de ese paquete. Pero eso no está bien visto porque no se sabe qué cosas estoy usando.
Entonces lo cambié por los imports uno por uno, solo los que necesito, como Tarea, Usuario ... Así el código queda más limpio y ya no da problema.

# 3.-Lista de pruebas unitarias asociadas a cada refactorización (clase y método de test).

## He creado los test dentro de src - test - kotlin , ahí estan los tres .

1.-Primer test de la primera refactorización [Captura de la primera verificación](https://github.com/moraalees/TaskManagerEntornos/blob/Bruno/images/debug1/Captura%20de%20pantalla%202025-05-21%20160654.png)

2.-Sgundo test de la segunda refactorización [Captura de la segunda verificación](https://github.com/moraalees/TaskManagerEntornos/blob/Bruno/images/debug1/Captura%20de%20pantalla%202025-05-21%20161751.png)

3.-Tercer test de la tercera refactorización [Captura de la tercera verificación](https://github.com/moraalees/TaskManagerEntornos/blob/Bruno/images/debug1/Captura%20de%20pantalla%202025-05-21%20162433.png)

# 4.-Preguntas:
## [1]

### 1.a ¿Qué code smell y patrones de refactorización has aplicado?
He aplicado tres refactorizaciones distintas para corregir code smells:

Demasiados return en una función (ReturnCount):
La función cambiarEstadoTarea() tenía 3 return, que es más de lo recomendado. La refactoricé para dejar solo 2, reestructurando un poco el código para que sea más claro y cumpla las buenas prácticas.

Archivo sin salto de línea al final (NewLineAtEndOfFile):
En algunos archivos .kt, al final no había una línea en blanco. Esto puede dar problemas con Git y otras herramientas. Simplemente añadí un salto de línea al final del archivo.

Uso de import .* (WildcardImport):
Estaba usando import es.prog2425.taskmanager.model.*, que importa todo el paquete, aunque solo necesitaba algunas clases. Lo cambié para importar solo las que uso: Tarea, Estado, Actividad y Filtro.

### 1.b Teniendo en cuenta aquella funcionalidad que tiene pruebas unitarias, selecciona un patrón de refactorización de los que has aplicado y que están cubierto por los test unitarios. ¿Porque mejora o no mejora tu código? Asegurate de poner enlaces a tu código
Selecciono la primera refactorización: la función cambiarEstadoTarea(), que reduje de 3 a 2 return.
Esta refactorización mejora el código porque ahora es más limpio, fácil de leer y sigue las buenas prácticas. Además, como hay tests unitarios que prueban la selección de tareas por ID y el cambio de estado, puedo asegurarme de que sigue funcionando igual que antes.

## [2]

### 2.a Describe el proceso que sigues para asegurarte que la refactorización no afecta a código que ya tenias desarrollado.
Primero, reviso bien qué hace el código antes de tocar nada. Luego, hago la refactorización con la ayuda del IDE .
Después, ejecuto todos los tests unitarios que ya tenía hechos. Si todos pasan, significa que el código sigue funcionando como antes.
También pruebo manualmente desde consola si algo no tiene test todavía, para estar seguro.


## [3]

### 3.a ¿Que funcionalidad del IDE has usado para aplicar la refactorización seleccionada? Si es necesario, añade capturas de pantalla para identificar la funcionalidad.

He usado IntelliJ IDEA, y dentro del menú Refactor he usado:

Reformatear código para organizar los saltos de línea y limpiar el estilo.
Optimizar imports para que elimine los import * y solo deje los necesarios.
También he usado el aviso del IDE cuando hay un code smell. IntelliJ me marcaba los errores y al darle clic derecho, podía aplicar la solución automática o ir al menú de refactor.
